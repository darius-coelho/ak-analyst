import React from 'react';
import FilterControl from "../../components/transformer/control/FilterControl";

import {render, cleanup, screen, fireEvent, waitForElement } from "@testing-library/react";
import userEvent from '@testing-library/user-event';

describe("Test for FilterControl panel", () => {
  afterEach(cleanup);

  it("should test the initial state", () => {
    const onPreviewFilter = jest.fn();
    const onTransform = jest.fn();
    
    const description = {
      '25%': 41.2904435,
      '50%': 62.463005,
      '75%': 93.1553895,
      card: 0,
      coll: [],
      corr: [],
      count:[138, 142, 54, 16, 12, 2, 3, 2, 0, 0, 0, 0, 1, 1,
	     0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
      
      countAll: [138, 142, 54, 16, 12, 2, 3, 2, 0, 0, 0, 0, 1, 1,
		 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
      
      countPrev: [138, 142, 54, 16, 12, 2, 3, 2, 0, 0, 0, 0, 1, 1,
		  0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
      
      division: [8.33, 50.8023333333, 93.2746666667, 135.747, 178.2193333333,
		 220.6916666667, 263.164, 305.6363333333, 348.1086666667, 390.581,
		 433.0533333333, 475.5256666667, 517.998, 560.4703333333, 602.9426666667,
		 645.415, 687.8873333333, 730.3596666667, 772.832, 815.3043333333,
		 857.7766666667, 900.249, 942.7213333333, 985.1936666667, 1027.666,
		 1070.1383333333, 1112.6106666667, 1155.083, 1197.5553333333, 1240.0276666667,
		 1282.5],
      
      divisionAll: [8.33, 50.8023333333, 93.2746666667, 135.747, 178.2193333333,
		    220.6916666667, 263.164, 305.6363333333, 348.1086666667,
		    390.581, 433.0533333333, 475.5256666667, 517.998, 560.4703333333,
		    602.9426666667, 645.415, 687.8873333333, 730.3596666667, 772.832,
		    815.3043333333, 857.7766666667, 900.249, 942.7213333333, 985.1936666667,
		    1027.666, 1070.1383333333, 1112.6106666667, 1155.083, 1197.5553333333,
		    1240.0276666667, 1282.5],
      
      divisionPrev: [8.33, 50.8023333333, 93.2746666667, 135.747, 178.2193333333,
		     220.6916666667, 263.164, 305.6363333333, 348.1086666667,
		     390.581, 433.0533333333, 475.5256666667, 517.998, 560.4703333333,
		     602.9426666667, 645.415, 687.8873333333, 730.3596666667, 772.832,
		     815.3043333333, 857.7766666667, 900.249, 942.7213333333, 985.1936666667,
		     1027.666, 1070.1383333333, 1112.6106666667, 1155.083, 1197.5553333333,
		     1240.0276666667, 1282.5],
      
      hasHighCard: false,
      hasMiss: false,
      max: 1282.5,
      mean: 83.0262498824,
      min: 8.33,
      missFunc: "None",
      name: "price",
      outP: 0,
      std: 99.7103660522,
      type: "Numerical"
    };

    const props = {
      width: 250,
      description: description,      
      onPreviewFilter: onPreviewFilter,
      onTransform: onTransform,
    };
    
    render(<FilterControl {...props} />);

    const rects = screen.getAllByTestId("filter-rect");
    expect(rects).toHaveLength(30);    
  });
  
});
